<table class="file-table">
<% if (editable) { %>
<thead>
	<tr>
		<th><%= $.i18n.prop('FileName') %></th>
		<th><%= $.i18n.prop('FileSize') %></th>
		<th><%= $.i18n.prop('FileDate') %></th>
<% if (withMetadata) { %>
		<th><%= $.i18n.prop('FileDescription') %></th>
<% } %>
		<th>
			<input type="hidden" name="<%= name %>" value="<%= file.id %>" />
		</th>
	</tr>
</thead>
<% } %>	
<tbody>
	<tr>
		<td>
<% if (!_.isUndefined(file.id)) { %>
<% if (withMetadata && file.name) { %>
			<a href='<%= file.currentBody.url %>' target="viewfile"><%= file.name %>, (<%= file.currentBody.originalFilename %>)</a>
<% } else { %>
			<a href='<%= file.currentBody.url %>' target="viewfile"><%= file.currentBody.originalFilename %></a>
<% } %>	
<% } %>
		</td>
		<td>
<% if (!_.isUndefined(file.id)) { %>
			<%= App.utils.formatFileSize(file.currentBody.fileSize) %>
<% } %>			
		</td>
		<td>
<% if (!_.isUndefined(file.id)) { %>
			<%= file.currentBody.date %>
<% } %>
		</td>
<% if (withMetadata) { %>
		<td><%= file.description %></td>
<% } %>
<% if (editable) { %>
		<td>
			<div class="btn-toolbar pull-right">
  				<div class="btn-group">
  					<a id="toggleUpload" class="btn btn-small" rel="tooltip" title="<%= $.i18n.prop('btn_upload') %>"><i class="icon-upload"></i></a>
<% if (!_.isUndefined(file.id)) { %>
					<a id="delete" data-file-id="<%= file.id %>" class="btn btn-small btn-danger" rel="tooltip" title="<%= $.i18n.prop('btn_delete') %>"><i class="icon-trash icon-white"></i></a>
<% } %>
				</div>
			</div>
		</td>
<% } %>
	</tr>
</tbody>
</table>
<div id="uploader" class="modal fade">
	<div class="modal-header">
 		<button type="button" class="close" data-dismiss="modal">Ã—</button>
 		<h3><%= $.i18n.prop('FileUploadForm') %></h3>
	</div>
	<div class="modal-body">
		<table class="table table-striped table-bordered">
			<tr>
				<th>
					<%= $.i18n.prop('File') %> 
				</th>
				<td>
					<input type="hidden" name="file_type" value="<%= file.type %>" />
					<input type="file" name="file" />
				</td>
			</tr>
			<% if (withMetadata) { %>
			<tr>	
				<th>
					<%= $.i18n.prop('FileName') %> 
				</th>
				<td>
					<input type="text" name="file_name" class="input-large" value="<%= file.name %>" />
				</td>
			</tr>
			<tr>
				<th>
					<%= $.i18n.prop('FileDescription') %>
				</th>
				<td>
					<textarea name="file_description" rows="3" class="input-large"><%= file.description %></textarea>
				</td>
			</tr>
			<% } %>
		</table>
	</div>
	<div class="modal-footer">
		<div class="progress">
			<div class="bar" style="width: 0%;"></div>
		</div>
 		<a id="upload" data-file-id="<%= file.id %>" class="btn btn-primary btn-small pull-right"><i class="icon-white icon-upload"></i> <%= $.i18n.prop('btn_upload') %></a>
	</div>
</div>